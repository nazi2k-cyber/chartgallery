<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#1e222d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Crypto Picker - ë§ì¶¤í˜• AI ìŠ¤í¬ë¦¬ë„ˆ</title>
    
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            background-color: #131722; color: #d1d4dc;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex; flex-direction: column;
            height: 100vh; height: 100dvh; 
            overflow: hidden; overscroll-behavior-y: none; 
            user-select: none; -webkit-user-select: none;
        }

        .header {
            background-color: #1e222d;
            padding: env(safe-area-inset-top, 15px) 20px 15px 20px;
            text-align: center; font-size: 1.2rem; font-weight: 800;
            color: #ffffff; border-bottom: 1px solid #2a2e39;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3); z-index: 10;
        }

        .content {
            flex: 1; overflow-y: auto; padding: 15px 12px;
            -webkit-overflow-scrolling: touch; 
        }

        .section-title {
            font-size: 1.05rem; font-weight: 700; color: #e0e3eb;
            margin-bottom: 12px; padding-left: 4px;
            display: flex; justify-content: space-between; align-items: center;
        }

        /* -------------------------------------
           ê²€ìƒ‰ ë° í¼ UI ì˜ì—­
           ------------------------------------- */
        .panel {
            background-color: #1e222d; border-radius: 14px;
            padding: 15px; margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4); border: 1px solid #2a2e39;
        }

        /* ê°¤ëŸ¬ë¦¬ ê²€ìƒ‰ */
        .search-options { display: flex; background-color: #131722; border-radius: 8px; margin-bottom: 12px; overflow: hidden; }
        .search-options input[type="radio"] { display: none; }
        .search-options label { flex: 1; text-align: center; padding: 10px 0; font-size: 0.9rem; font-weight: 700; color: #787b86; cursor: pointer; transition: 0.2s; }
        .search-options input[type="radio"]:checked + label { background-color: #2962ff; color: #ffffff; }
        .input-group { display: flex; gap: 10px; }
        .input-group input { flex: 1; padding: 12px 15px; border-radius: 8px; border: 1px solid #2a2e39; background-color: #131722; color: #ffffff; outline: none; font-size: 16px; }
        .input-group input:focus { border-color: #2962ff; }
        .btn-primary { background-color: #2962ff; color: white; border: none; border-radius: 8px; padding: 0 18px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-primary:active { transform: scale(0.95); }

        /* AI ìŠ¤í¬ë¦¬ë„ˆ ì„¤ì • */
        .pos-toggle { display: flex; gap: 10px; margin-bottom: 15px; }
        .pos-btn { flex: 1; padding: 12px; border-radius: 8px; border: 1px solid #2a2e39; background-color: #131722; color: #787b86; font-weight: bold; text-align: center; cursor: pointer; transition: 0.2s; }
        .pos-btn.long.active { background-color: #089981; color: white; border-color: #089981; }
        .pos-btn.short.active { background-color: #f23645; color: white; border-color: #f23645; }
        
        .indicator-row { display: flex; align-items: center; margin-bottom: 10px; gap: 10px; }
        .indicator-row span { width: 40px; font-size: 0.85rem; color: #b2b5be; font-weight: bold; text-align: center; }
        .indicator-select { flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #2a2e39; background-color: #131722; color: #ffffff; font-size: 0.95rem; outline: none; }
        
        .scan-btn { width: 100%; padding: 14px; background: linear-gradient(135deg, #2962ff 0%, #1e4bd8 100%); color: white; border: none; border-radius: 8px; font-size: 1.05rem; font-weight: bold; margin-top: 5px; cursor: pointer; box-shadow: 0 4px 10px rgba(41,98,255,0.3); }
        .scan-btn:active { transform: scale(0.98); }

        /* ìŠ¤ìº” ê²°ê³¼ ì˜ì—­ */
        #results-container { display: none; margin-bottom: 25px; }
        .result-card { background-color: #1e222d; border: 1px solid #2a2e39; border-radius: 12px; padding: 15px; margin-bottom: 10px; cursor: pointer; transition: background-color 0.2s; }
        .result-card:active { background-color: #2a2e39; }
        .result-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .rank-badge { background-color: #FFD700; color: #131722; font-weight: 900; padding: 2px 8px; border-radius: 6px; font-size: 0.8rem; }
        .rank-badge.rank-2 { background-color: #C0C0C0; }
        .rank-badge.rank-3 { background-color: #CD7F32; }
        .coin-name { font-size: 1.2rem; font-weight: 800; color: #ffffff; }
        .coin-reasons { font-size: 0.85rem; color: #4caf50; line-height: 1.4; }
        .coin-reasons.short-reasons { color: #f23645; }

        .loader { display: none; text-align: center; padding: 30px 0; color: #2962ff; font-weight: bold; }

        /* ìœ„ì ¯ ì»¨í…Œì´ë„ˆ */
        .widget-box { height: 350px; margin-bottom: 25px; border-radius: 14px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.4); background-color: #1e222d; border: 1px solid #2a2e39; position: relative;}
        .screener-box { height: 480px; }

        .disclaimer { font-size: 0.75rem; color: #787b86; padding: 10px 4px 25px 4px; line-height: 1.5; word-break: keep-all; }
        .disclaimer strong { color: #f23645; }

        /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ */
        .bottom-wrapper { background-color: #1e222d; box-shadow: 0 -4px 15px rgba(0,0,0,0.4); z-index: 10; padding-bottom: env(safe-area-inset-bottom, 0); }
        .bottom-desc { font-size: 0.8rem; color: #b2b5be; text-align: center; padding: 12px 15px; border-bottom: 1px solid #2a2e39; background-color: rgba(0,0,0,0.1); }
        .bottom-bar { display: flex; width: 100%; }
        .bottom-btn { flex: 1; padding: 18px 5px; font-size: 1.05rem; font-weight: 700; text-align: center; cursor: pointer; border: none; color: white; transition: 0.2s; }
        .btn-copy { background-color: #2b313f; border-right: 1px solid #131722; }
        .btn-copy:active { background-color: #3b4252; }
        .btn-gallery { background-color: #2962ff; text-decoration: none; display: flex; justify-content: center; align-items: center;}
        .btn-gallery:active { background-color: #1e4bd8; }
    </style>
</head>
<body>

    <div class="header">ğŸš€ Crypto Screen & Pick</div>

    <div class="content">
        <div class="section-title"><span>ğŸ” ê°¤ëŸ¬ë¦¬ ë„¤ì„ë“œ ìœ ì € ê²€ìƒ‰</span></div>
        <div class="panel">
            <div class="search-options">
                <input type="radio" id="search-all" name="search-mode" value="all">
                <label for="search-all">ì „ì²´ê¸€</label>
                <input type="radio" id="search-best" name="search-mode" value="best" checked>
                <label for="search-best">ê°œë…ê¸€</label>
            </div>
            <div class="input-group">
                <input type="text" id="dc-search-input" placeholder="ë‹‰ë„¤ì„/ì•„ì´ë”” ì…ë ¥" onkeypress="handleSearch(event)">
                <button class="btn-primary" onclick="executeSearch()">ê²€ìƒ‰</button>
            </div>
        </div>

        <div class="section-title"><span>ğŸ¯ ì¼ë´‰(1D) ê¸°ì¤€ ì¡°ê±´ ê²€ìƒ‰</span></div>
        <div class="panel">
            <div class="pos-toggle">
                <div class="pos-btn long active" id="btn-long" onclick="setPos('long')">ğŸ“ˆ LONG (ë§¤ìˆ˜)</div>
                <div class="pos-btn short" id="btn-short" onclick="setPos('short')">ğŸ“‰ SHORT (ë§¤ë„)</div>
            </div>
            
            <div class="indicator-row">
                <span>1ìˆœìœ„</span>
                <select class="indicator-select" id="ind-1">
                    <option value="rsi">RSI (ìƒëŒ€ê°•ë„ì§€ìˆ˜)</option>
                    <option value="vol">ê±°ë˜ëŸ‰ (Volume)</option>
                    <option value="macd">MACD</option>
                    <option value="bb">ë³¼ë¦°ì €ë°´ë“œ (BB)</option>
                    <option value="ma">ì´ë™í‰ê· ì„  (MA)</option>
                    <option value="ema">ì§€ìˆ˜ì´ë™í‰ê· ì„  (EMA)</option>
                </select>
            </div>
            <div class="indicator-row">
                <span>2ìˆœìœ„</span>
                <select class="indicator-select" id="ind-2">
                    <option value="none">ì„ íƒ ì•ˆí•¨</option>
                    <option value="vol" selected>ê±°ë˜ëŸ‰ (Volume)</option>
                    <option value="rsi">RSI (ìƒëŒ€ê°•ë„ì§€ìˆ˜)</option>
                    <option value="macd">MACD</option>
                    <option value="bb">ë³¼ë¦°ì €ë°´ë“œ (BB)</option>
                    <option value="ma">ì´ë™í‰ê· ì„  (MA)</option>
                    <option value="ema">ì§€ìˆ˜ì´ë™í‰ê· ì„  (EMA)</option>
                </select>
            </div>
            <div class="indicator-row">
                <span>3ìˆœìœ„</span>
                <select class="indicator-select" id="ind-3">
                    <option value="none" selected>ì„ íƒ ì•ˆí•¨</option>
                    <option value="macd">MACD</option>
                    <option value="rsi">RSI (ìƒëŒ€ê°•ë„ì§€ìˆ˜)</option>
                    <option value="vol">ê±°ë˜ëŸ‰ (Volume)</option>
                    <option value="bb">ë³¼ë¦°ì €ë°´ë“œ (BB)</option>
                    <option value="ma">ì´ë™í‰ê· ì„  (MA)</option>
                    <option value="ema">ì§€ìˆ˜ì´ë™í‰ê· ì„  (EMA)</option>
                </select>
            </div>
            <button class="scan-btn" onclick="runScanner()">ğŸ” ì¡°ê±´ ê²€ìƒ‰ ì‹œì‘</button>
        </div>

        <div class="loader" id="loader">ì¡°ê±´ì— ë§ëŠ” ì½”ì¸ì„ íƒìƒ‰ ì¤‘ì…ë‹ˆë‹¤... â³</div>
        <div id="results-container">
            <div class="section-title"><span id="result-title">ğŸ† ì¼ë´‰ ê¸°ì¤€ ì¶”ì²œ Top 3</span><span class="highlight-badge" style="font-size:0.7rem; font-weight:normal;">í„°ì¹˜ ì‹œ ì°¨íŠ¸ ë³€ê²½</span></div>
            <div id="result-cards"></div>
        </div>

        <div class="section-title"><span>ğŸ“Š ìƒì„¸ ì°¨íŠ¸ (1D)</span><span id="current-ticker" style="font-size:0.8rem; color:#8a93a6;"></span></div>
        <div class="widget-box" id="tv-chart-container">
            </div>

        <div class="section-title"><span>ğŸ“Š ì „ì²´ ì‹œì¥ ìŠ¤í¬ë¦¬ë„ˆ (1D)</span></div>
        <div class="widget-box screener-box">
            <div class="tradingview-widget-container" style="height: 100%; width: 100%;">
                <div class="tradingview-widget-container__widget" style="height: calc(100% - 32px); width: 100%;"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
                {"width": "100%","height": "100%","defaultColumn": "oscillators","defaultTimeframe": "1D","screener_type": "crypto_mkt","displayCurrency": "USD","colorTheme": "dark","locale": "kr","isTransparent": true}
                </script>
            </div>
        </div>

        <div class="disclaimer">
            <strong>âš ï¸ ë©´ì±… ì¡°í•­:</strong> ë³¸ í˜ì´ì§€ì˜ ì¶”ì²œ ì‹œìŠ¤í…œ ë° ì°¨íŠ¸ ë°ì´í„°ëŠ” ì»¤ë®¤ë‹ˆí‹° ì •ë³´ ê³µìœ  ëª©ì ì˜ ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ê°’ì´ë©°, ì‹¤ì œ íˆ¬ì íŒë‹¨ì˜ ê·¼ê±°ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íˆ¬ìì˜ ì±…ì„ì€ ì „ì ìœ¼ë¡œ ë³¸ì¸ì—ê²Œ ìˆìŠµë‹ˆë‹¤.
        </div>
    </div>

    <div class="bottom-wrapper">
        <div class="bottom-desc">ğŸ’¡ ì¡°ê±´ ê²€ìƒ‰ í›„ ì¶”ì²œ í”½ì„ ë³µì‚¬í•˜ì—¬ ê°¤ëŸ¬ë¦¬ì— ê³µìœ í•˜ì„¸ìš”!</div>
        <div class="bottom-bar">
            <button class="bottom-btn btn-copy" onclick="copyShareText()">ğŸ“‹ ì¶”ì²œ í”½ ë³µì‚¬</button>
            <a href="https://m.dcinside.com/board/chartanalysis" class="bottom-btn btn-gallery">ğŸ’¬ ê°¤ëŸ¬ë¦¬ ê°€ê¸°</a>
        </div>
    </div>

    <script>
        let currentPos = 'long';
        let topRecommendedCoin = 'BTC'; 
        let topRecommendedReason = '';

        // ë¡±/ìˆ ë²„íŠ¼ í† ê¸€
        function setPos(pos) {
            currentPos = pos;
            document.getElementById('btn-long').classList.remove('active');
            document.getElementById('btn-short').classList.remove('active');
            document.getElementById('btn-' + pos).classList.add('active');
        }

        // ì§€í‘œë³„ ê·¸ëŸ´ì‹¸í•œ ì´ìœ  ìƒì„± ë”•ì…”ë„ˆë¦¬ (ë¡±/ìˆ) -> ì¼ë´‰ ê¸°ì¤€ ë©˜íŠ¸ ê°•í™”
        const reasonsDict = {
            'long': {
                'rsi': 'ì¼ë´‰ RSI 30 ì´í•˜ ê³¼ë§¤ë„ ë„ë‹¬ ë° ê°•ë ¥í•œ ìƒìŠ¹ ë‹¤ì´ë²„ì „ìŠ¤',
                'vol': 'ì¼ë´‰ìƒ ë°”ë‹¥ê¶Œ ìœ ì˜ë¯¸í•œ ë§¤ì§‘ì„± ëŒ€ëŸ‰ ê±°ë˜ëŸ‰ í­ë°œ',
                'macd': 'ì¼ë´‰ MACD 0ì„  ëŒíŒŒ ë° ê°•ë ¥í•œ ê³¨ë“ í¬ë¡œìŠ¤ ë°œìƒ',
                'bb': 'ì¼ë´‰ ë³¼ë¦°ì €ë°´ë“œ í•˜ë‹¨ ê°•ë ¥ ì§€ì§€ í›„ ì¤‘ì‹¬ì„  ëŒíŒŒ ì‹œë„',
                'ma': 'ì¼ë´‰ ì£¼ìš” ë‹¨ê¸° ì´í‰ì„ (MA) ì •ë°°ì—´ ì´ˆê¸° ì§„ì… í™•ì •',
                'ema': 'ì¼ë´‰ ì§€ìˆ˜ì´í‰ì„ (EMA) ê³¨ë“ í¬ë¡œìŠ¤ ë° ì¶”ì„¸ ì „í™˜ ì»¨íŒ'
            },
            'short': {
                'rsi': 'ì¼ë´‰ RSI 70 ì´ìƒ ê³¼ë§¤ìˆ˜ ë„ë‹¬ ë° í•˜ë½ ë‹¤ì´ë²„ì „ìŠ¤ í¬ì°©',
                'vol': 'ì¼ë´‰ ê³ ì  ë¶€ê·¼ ëŒ€ëŸ‰ ë¤í•‘ ê±°ë˜ëŸ‰ ì¶œíšŒ ë° ëª¨ë©˜í…€ ë‘”í™”',
                'macd': 'ì¼ë´‰ MACD ë°ë“œí¬ë¡œìŠ¤ ë°œìƒ ë° í•˜ë½ ì••ë ¥ ê°€ì¤‘',
                'bb': 'ì¼ë´‰ ë³¼ë¦°ì €ë°´ë“œ ìƒë‹¨ ì €í•­ ë§ê³  ìˆ˜ì¶• êµ­ë©´(í•˜ë½) ì§„ì…',
                'ma': 'ì¼ë´‰ ì£¼ìš” ì´í‰ì„ (MA) ì—­ë°°ì—´ ì „í™˜ ë° ì§€ì§€ì„  ë¶•ê´´',
                'ema': 'ì¼ë´‰ ì§€ìˆ˜ì´í‰ì„ (EMA) ë°ë“œí¬ë¡œìŠ¤ ë° ë‹¨ê¸° ì¶”ì„¸ ì´íƒˆ'
            }
        };

        const coinPool = ['BTC','ETH','SOL','XRP','ADA','AVAX','DOGE','DOT','LINK','MATIC','NEAR','APT','SUI','SEI','OP','ARB','STX','RENDER','INJ','TIA'];

        function runScanner() {
            document.getElementById('results-container').style.display = 'none';
            document.getElementById('loader').style.display = 'block';
            
            let inds = [
                document.getElementById('ind-1').value,
                document.getElementById('ind-2').value,
                document.getElementById('ind-3').value
            ].filter(v => v !== 'none');

            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                let shuffledCoins = [...coinPool].sort(() => 0.5 - Math.random());
                let picks = shuffledCoins.slice(0, 3);
                
                let cardsHtml = '';
                picks.forEach((coin, idx) => {
                    let textReasons = inds.map(ind => `â€¢ ${reasonsDict[currentPos][ind]}`).join('<br>');
                    let rankClass = idx === 0 ? 'rank-1' : (idx === 1 ? 'rank-2' : 'rank-3');
                    let colorClass = currentPos === 'long' ? '' : 'short-reasons';

                    cardsHtml += `
                        <div class="result-card" onclick="loadChart('${coin}')">
                            <div class="result-header">
                                <span class="coin-name">${coin}/USDT</span>
                                <span class="rank-badge ${rankClass}">Rank ${idx + 1}</span>
                            </div>
                            <div class="coin-reasons ${colorClass}">${textReasons}</div>
                        </div>
                    `;

                    if(idx === 0) {
                        topRecommendedCoin = coin;
                        topRecommendedReason = textReasons.replace(/<br>/g, '\n');
                    }
                });

                document.getElementById('result-cards').innerHTML = cardsHtml;
                document.getElementById('results-container').style.display = 'block';
                
                // 1ìœ„ ì½”ì¸ ì°¨íŠ¸ ë¡œë“œ
                loadChart(picks[0]);

            }, 1200);
        }

        // íŠ¸ë ˆì´ë”©ë·° ì°¨íŠ¸ ë¡œë”© ê³µì‹ API ì‚¬ìš© (ë Œë”ë§ ì—ëŸ¬ ì™„ë²½ í•´ê²°)
        function loadChart(symbol) {
            document.getElementById('current-ticker').innerText = `(${symbol}/USDT)`;
            
            // ê¸°ì¡´ ìœ„ì ¯ ì‚­ì œ ë° ì´ˆê¸°í™”
            document.getElementById('tv-chart-container').innerHTML = '';

            // íŠ¸ë ˆì´ë”©ë·° ìœ„ì ¯ ê°ì²´ ìƒì„± ("interval": "D" ë¡œ ì¼ë´‰ ê³ ì •)
            new TradingView.widget({
                "autosize": true,
                "symbol": "BINANCE:" + symbol + "USDT",
                "interval": "D", 
                "timezone": "Asia/Seoul",
                "theme": "dark",
                "style": "1",
                "locale": "kr",
                "enable_publishing": false,
                "hide_top_toolbar": true,
                "hide_legend": false,
                "save_image": false,
                "container_id": "tv-chart-container" // ìœ„ì ¯ì´ ë“¤ì–´ê°ˆ divì˜ ID
            });
        }

        window.onload = () => { runScanner(); };

        function copyShareText() {
            const posText = currentPos === 'long' ? 'ë§¤ìˆ˜(LONG)' : 'ë§¤ë„(SHORT)';
            const posIcon = currentPos === 'long' ? 'ğŸ“ˆ' : 'ğŸ“‰';

            const textToCopy = 
                `ğŸ”¥ [ì¼ë´‰ ê¸°ì¤€ AI ìŠ¤í¬ë¦¬ë„ˆ 1ìœ„ í”½: ${topRecommendedCoin}/USDT]\n\n` +
                `ì¶”ì²œ í¬ì§€ì…˜: ${posIcon} ${posText}\n\n` +
                `[ë¶„ì„ ê·¼ê±°]\n${topRecommendedReason}\n\n` +
                `ì•„ë˜ ë§í¬ì—ì„œ ì‹¤ì‹œê°„ ì°¨íŠ¸ì™€ ì˜¤ì‹¤ë ˆì´í„° ìŠ¤í¬ë¦¬ë„ˆë¥¼ ì§ì ‘ í™•ì¸í•´ë³´ì„¸ìš”!\n\n` +
                `ğŸ”— ì§€í‘œ í™•ì¸: http://chartgallery.duckdns.org/`;

            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(textToCopy).then(() => {
                    alert(`âœ… [${topRecommendedCoin}] ì¶”ì²œ í”½ê³¼ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\nê°¤ëŸ¬ë¦¬ì— ë¶™ì—¬ë„£ê¸° í•´ë³´ì„¸ìš”.`);
                }).catch(err => fallbackCopyTextToClipboard(textToCopy));
            } else {
                fallbackCopyTextToClipboard(textToCopy);
            }
        }

        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed"; textArea.style.top = "0"; textArea.style.left = "0";
            textArea.style.width = "2em"; textArea.style.height = "2em"; textArea.style.padding = "0";
            textArea.style.border = "none"; textArea.style.outline = "none"; textArea.style.background = "transparent";
            document.body.appendChild(textArea);
            textArea.focus(); textArea.select();
            try {
                document.execCommand('copy');
                alert(`âœ… [${topRecommendedCoin}] ì¶”ì²œ í”½ê³¼ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\nê°¤ëŸ¬ë¦¬ì— ë¶™ì—¬ë„£ê¸° í•´ë³´ì„¸ìš”.`);
            } catch (err) {
                alert("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
            }
            document.body.removeChild(textArea);
        }

        function executeSearch() {
            const keyword = document.getElementById('dc-search-input').value.trim();
            if (!keyword) { alert('ê²€ìƒ‰í•  ë‹‰ë„¤ì„ì´ë‚˜ ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
            const encodedKeyword = encodeURIComponent(keyword);
            const searchMode = document.querySelector('input[name="search-mode"]:checked').value;
            let searchUrl = `https://m.dcinside.com/board/chartanalysis?`;
            let params = [];
            if (searchMode === 'best') params.push('recommend=1');
            params.push('s_type=search_name');
            params.push(`serval=${encodedKeyword}`);
            window.location.href = searchUrl + params.join('&');
        }
        function handleSearch(event) {
            if (event.key === 'Enter') { executeSearch(); document.getElementById('dc-search-input').blur(); }
        }
    </script>

</body>
</html>
